{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"text-h6 mb-2\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-space-between px-4\"\n};\nconst _hoisted_3 = {\n  class: \"d-flex align-center justify-center pa-4\"\n};\nconst _hoisted_4 = {\n  class: \"mx-2 text-caption\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_list_item = _resolveComponent(\"v-list-item\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_col = _resolveComponent(\"v-col\");\n  const _component_v_row = _resolveComponent(\"v-row\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  const _component_v_data_iterator = _resolveComponent(\"v-data-iterator\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_spacer = _resolveComponent(\"v-spacer\");\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\");\n  const _component_v_dialog = _resolveComponent(\"v-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_v_card, null, {\n    default: _withCtx(() => [_createVNode(_component_v_data_iterator, {\n      items: $data.items,\n      \"items-per-page\": this.limit,\n      page: $data.page\n    }, {\n      default: _withCtx(({\n        items\n      }) => [_createVNode(_component_v_container, {\n        class: \"pa-2\",\n        fluid: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_row, {\n          dense: \"\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(items, item => {\n            return _openBlock(), _createBlock(_component_v_col, {\n              key: item.ID,\n              cols: \"auto\",\n              md: \"4\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_v_card, {\n                class: \"pb-3\",\n                border: \"\",\n                flat: \"\"\n              }, {\n                default: _withCtx(() => [_createVNode(_component_v_list_item, {\n                  subtitle: item.raw.DETAIL_TEXT,\n                  class: \"mb-2\"\n                }, {\n                  title: _withCtx(() => [_createElementVNode(\"strong\", _hoisted_1, _toDisplayString(item.raw.NAME), 1)]),\n                  _: 2\n                }, 1032, [\"subtitle\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_v_btn, {\n                  class: \"text-none\",\n                  size: \"small\",\n                  text: \"Подробнее\",\n                  variant: \"flat\",\n                  border: \"\",\n                  onClick: $event => this.getNewsDetail(item.raw.ID)\n                }, null, 8, [\"onClick\"])])]),\n                _: 2\n              }, 1024)]),\n              _: 2\n            }, 1024);\n          }), 128))]),\n          _: 2\n        }, 1024)]),\n        _: 2\n      }, 1024)]),\n      footer: _withCtx(({\n        page,\n        pageCount,\n        prevPage,\n        nextPage\n      }) => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_v_btn, {\n        disabled: this.page === 1,\n        density: \"comfortable\",\n        text: \"<\",\n        variant: \"tonal\",\n        rounded: \"\",\n        onClick: $event => {\n          this.page--;\n          this.getNewsList();\n        }\n      }, null, 8, [\"disabled\", \"onClick\"]), _createElementVNode(\"div\", _hoisted_4, \" Страница \" + _toDisplayString(this.page) + \" из \" + _toDisplayString(this.pageCount), 1), _createVNode(_component_v_btn, {\n        disabled: this.page >= this.pageCount,\n        density: \"comfortable\",\n        text: \">\",\n        variant: \"tonal\",\n        rounded: \"\",\n        onClick: $event => {\n          this.page++;\n          this.getNewsList();\n        }\n      }, null, 8, [\"disabled\", \"onClick\"])])]),\n      _: 1\n    }, 8, [\"items\", \"items-per-page\", \"page\"])]),\n    _: 1\n  }), _createVNode(_component_v_dialog, {\n    \"max-width\": \"50%\",\n    modelValue: $data.dialogOpen,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.dialogOpen = $event)\n  }, {\n    default: _withCtx(({\n      isActive\n    }) => [_createVNode(_component_v_card, {\n      title: this.detail.NAME\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(this.detail.DETAIL_TEXT), 1)]),\n        _: 1\n      }), _createVNode(_component_v_card_actions, null, {\n        default: _withCtx(() => [_createVNode(_component_v_spacer), _createVNode(_component_v_btn, {\n          text: \"Закрыть\",\n          onClick: $event => isActive.value = false\n        }, null, 8, [\"onClick\"])]),\n        _: 2\n      }, 1024)]),\n      _: 2\n    }, 1032, [\"title\"])]),\n    _: 1\n  }, 8, [\"modelValue\"])], 64);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_createVNode","_component_v_card","default","_withCtx","_component_v_data_iterator","items","$data","limit","page","_component_v_container","fluid","_component_v_row","dense","_renderList","item","_createBlock","_component_v_col","key","ID","cols","md","border","flat","_component_v_list_item","subtitle","raw","DETAIL_TEXT","title","_createElementVNode","_hoisted_1","_toDisplayString","NAME","_","_hoisted_2","_component_v_btn","size","text","variant","onClick","$event","getNewsDetail","footer","pageCount","prevPage","nextPage","_hoisted_3","disabled","density","rounded","getNewsList","_hoisted_4","_component_v_dialog","modelValue","dialogOpen","_cache","isActive","detail","_component_v_card_text","_createTextVNode","_component_v_card_actions","_component_v_spacer","value"],"sources":["/home/bitrix/www/local/modules/marso.test/install/components/marso.test.news/templates/vue/app/src/App.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-data-iterator\n      :items=\"items\"\n      :items-per-page=\"this.limit\"\n      :page=\"page\"\n    >\n      <template v-slot:default=\"{ items }\">\n        <v-container class=\"pa-2\" fluid>\n          <v-row dense>\n            <v-col\n              v-for=\"item in items\"\n              :key=\"item.ID\"\n              cols=\"auto\"\n              md=\"4\"\n            >\n              <v-card class=\"pb-3\" border flat>\n\n                <v-list-item :subtitle=\"item.raw.DETAIL_TEXT\" class=\"mb-2\">\n                  <template v-slot:title>\n                    <strong class=\"text-h6 mb-2\">{{ item.raw.NAME }}</strong>\n                  </template>\n                </v-list-item>\n\n                <div class=\"d-flex justify-space-between px-4\">\n                  <v-btn\n                    class=\"text-none\"\n                    size=\"small\"\n                    text=\"Подробнее\"\n                    variant=\"flat\"\n                    border\n                    @click=\"this.getNewsDetail(item.raw.ID)\"\n                  >\n                  </v-btn>\n                </div>\n              </v-card>\n            </v-col>\n          </v-row>\n        </v-container>\n      </template>\n\n      <template v-slot:footer=\"{ page, pageCount, prevPage, nextPage }\">\n        <div class=\"d-flex align-center justify-center pa-4\">\n          <v-btn\n            :disabled=\"this.page === 1\"\n            density=\"comfortable\"\n            text=\"<\"\n            variant=\"tonal\"\n            rounded\n            @click=\"this.page--; this.getNewsList()\"\n          ></v-btn>\n\n          <div class=\"mx-2 text-caption\">\n            Страница {{ this.page }} из {{ this.pageCount }}\n          </div>\n\n          <v-btn\n            :disabled=\"this.page >= this.pageCount\"\n            density=\"comfortable\"\n            text=\">\"\n            variant=\"tonal\"\n            rounded\n            @click=\"this.page++; this.getNewsList()\"\n            \n          ></v-btn>\n        </div>\n      </template>\n  \n    </v-data-iterator>\n  </v-card>\n  <v-dialog max-width=\"50%\" v-model=\"dialogOpen\"\n  >\n  <template v-slot:default=\"{ isActive }\">\n    <v-card :title=\"this.detail.NAME\">\n      <v-card-text>\n        {{this.detail.DETAIL_TEXT}}\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          text=\"Закрыть\"\n          @click=\"isActive.value = false\"\n        ></v-btn>\n      </v-card-actions>\n    </v-card>\n  </template>\n</v-dialog>\n</template>\n\n<script>\n// @ is an alias to /src\nimport axios from 'axios';\n//axios.defaults.params = {}\nexport default {\n  name: 'news',\n  components: {\n  },\n  data() {\n    return {\n      limit:6,\n      page: 1,\n      pageCount:0,\n      items: Array(),\n      detail:\"\",\n      isLoading:false,\n      isLoadingDetail:false,\n      dialogOpen:false\n    }\n  },\n  computed: {\n\n  },\n  mounted() {\n    this.getNewsList();\n  },\n  methods: {\n    async getNewsList() {\n      this.isLoading = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n          const response = await axios.get('http://172.19.110.3/marso.test/rest/getlist/', {\n            params: {\n                page: this.page,\n                limit: this.limit,\n            }\n          });\n          this.items = response.data.ITEMS;\n          this.totalItems = response.data.COUNT;\n          this.pageCount = Math.round(this.totalItems / this.limit) - 1;\n      } catch (e) {\n          alert(e)\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async getNewsDetail(id) {\n      this.isLoadingDetail = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n          const response = await axios.get('http://172.19.110.3/marso.test/rest/getDetail/', {\n            params: {\n                id: id,\n            }\n          });\n          console.log(response.data);\n          this.dialogOpen = true;\n          this.detail = response.data.ITEMS[0];\n      } catch (e) {\n          alert(e)\n      } finally {\n        this.isLoadingDetail = false;\n      }\n    },\n  }\n}\n</script>\n\n<style>\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}