{"ast":null,"code":"// @ is an alias to /src\nimport axios from 'axios';\n//axios.defaults.params = {}\nexport default {\n  name: 'news',\n  components: {},\n  data() {\n    return {\n      limit: 6,\n      page: 1,\n      pageCount: 0,\n      items: Array(),\n      detail: \"\",\n      isLoading: false,\n      isLoadingDetail: false,\n      dialogOpen: false\n    };\n  },\n  computed: {},\n  mounted() {\n    this.getNewsList();\n  },\n  methods: {\n    async getNewsList() {\n      this.isLoading = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n        const response = await axios.get('http://172.19.110.3/marso.test/rest/getlist/', {\n          params: {\n            page: this.page,\n            limit: this.limit\n          }\n        });\n        this.items = response.data.ITEMS;\n        this.totalItems = response.data.COUNT;\n        this.pageCount = Math.round(this.totalItems / this.limit) - 1;\n      } catch (e) {\n        alert(e);\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async getNewsDetail(id) {\n      this.isLoadingDetail = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n        const response = await axios.get('http://172.19.110.3/marso.test/rest/getDetail/', {\n          params: {\n            id: id\n          }\n        });\n        console.log(response.data);\n        this.dialogOpen = true;\n        this.detail = response.data.ITEMS[0];\n      } catch (e) {\n        alert(e);\n      } finally {\n        this.isLoadingDetail = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","components","data","limit","page","pageCount","items","Array","detail","isLoading","isLoadingDetail","dialogOpen","computed","mounted","getNewsList","methods","totalPages","Math","round","totalItems","response","get","params","ITEMS","COUNT","e","alert","getNewsDetail","id","console","log"],"sources":["/home/bitrix/www/local/modules/marso.test/install/components/marso.test.news/templates/vue/app/src/App.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-data-iterator\n      :items=\"items\"\n      :items-per-page=\"this.limit\"\n      :page=\"page\"\n    >\n      <template v-slot:default=\"{ items }\">\n        <v-container class=\"pa-2\" fluid>\n          <v-row dense>\n            <v-col\n              v-for=\"item in items\"\n              :key=\"item.ID\"\n              cols=\"auto\"\n              md=\"4\"\n            >\n              <v-card class=\"pb-3\" border flat>\n\n                <v-list-item :subtitle=\"item.raw.DETAIL_TEXT\" class=\"mb-2\">\n                  <template v-slot:title>\n                    <strong class=\"text-h6 mb-2\">{{ item.raw.NAME }}</strong>\n                  </template>\n                </v-list-item>\n\n                <div class=\"d-flex justify-space-between px-4\">\n                  <v-btn\n                    class=\"text-none\"\n                    size=\"small\"\n                    text=\"Подробнее\"\n                    variant=\"flat\"\n                    border\n                    @click=\"this.getNewsDetail(item.raw.ID)\"\n                  >\n                  </v-btn>\n                </div>\n              </v-card>\n            </v-col>\n          </v-row>\n        </v-container>\n      </template>\n\n      <template v-slot:footer=\"{ page, pageCount, prevPage, nextPage }\">\n        <div class=\"d-flex align-center justify-center pa-4\">\n          <v-btn\n            :disabled=\"this.page === 1\"\n            density=\"comfortable\"\n            icon=\"mdi-arrow-left\"\n            variant=\"tonal\"\n            rounded\n            @click=\"this.page--; this.getNewsList()\"\n          ></v-btn>\n\n          <div class=\"mx-2 text-caption\">\n            Страница {{ this.page }} из {{ this.pageCount }}\n          </div>\n\n          <v-btn\n            :disabled=\"this.page >= this.pageCount\"\n            density=\"comfortable\"\n            icon=\"mdi-arrow-right\"\n            variant=\"tonal\"\n            rounded\n            @click=\"this.page++; this.getNewsList()\"\n            \n          ></v-btn>\n        </div>\n      </template>\n  \n    </v-data-iterator>\n  </v-card>\n  <v-dialog max-width=\"500\" v-model=\"dialogOpen\"\n  >\n  <template v-slot:default=\"{ isActive }\">\n    <v-card title:this.detail.NAME>\n      <v-card-text>\n        {{this.detail.DETAIL_TEXT}}\n      </v-card-text>\n\n      <v-card-actions>\n        <v-spacer></v-spacer>\n\n        <v-btn\n          text=\"Закрыть\"\n          @click=\"isActive.value = false\"\n        ></v-btn>\n      </v-card-actions>\n    </v-card>\n  </template>\n</v-dialog>\n</template>\n\n<script>\n// @ is an alias to /src\nimport axios from 'axios';\n//axios.defaults.params = {}\nexport default {\n  name: 'news',\n  components: {\n  },\n  data() {\n    return {\n      limit:6,\n      page: 1,\n      pageCount:0,\n      items: Array(),\n      detail:\"\",\n      isLoading:false,\n      isLoadingDetail:false,\n      dialogOpen:false\n    }\n  },\n  computed: {\n\n  },\n  mounted() {\n    this.getNewsList();\n  },\n  methods: {\n    async getNewsList() {\n      this.isLoading = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n          const response = await axios.get('http://172.19.110.3/marso.test/rest/getlist/', {\n            params: {\n                page: this.page,\n                limit: this.limit,\n            }\n          });\n          this.items = response.data.ITEMS;\n          this.totalItems = response.data.COUNT;\n          this.pageCount = Math.round(this.totalItems / this.limit) - 1;\n      } catch (e) {\n          alert(e)\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async getNewsDetail(id) {\n      this.isLoadingDetail = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n          const response = await axios.get('http://172.19.110.3/marso.test/rest/getDetail/', {\n            params: {\n                id: id,\n            }\n          });\n          console.log(response.data);\n          this.dialogOpen = true;\n          this.detail = response.data.ITEMS[0];\n      } catch (e) {\n          alert(e)\n      } finally {\n        this.isLoadingDetail = false;\n      }\n    },\n  }\n}\n</script>\n\n<style>\n</style>\n"],"mappings":"AA4FA;AACA,OAAOA,KAAI,MAAO,OAAO;AACzB;AACA,eAAe;EACbC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAE,CACZ,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAC,CAAC;MACPC,IAAI,EAAE,CAAC;MACPC,SAAS,EAAC,CAAC;MACXC,KAAK,EAAEC,KAAK,CAAC,CAAC;MACdC,MAAM,EAAC,EAAE;MACTC,SAAS,EAAC,KAAK;MACfC,eAAe,EAAC,KAAK;MACrBC,UAAU,EAAC;IACb;EACF,CAAC;EACDC,QAAQ,EAAE,CAEV,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,WAAW,CAAC,CAAC;EACpB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,WAAWA,CAAA,EAAG;MAClB,IAAI,CAACL,SAAQ,GAAI,IAAI;MACrB,IAAIO,UAAS,GAAIC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACC,UAAS,GAAI,IAAI,CAAChB,KAAK,IAAI,CAAC;MAC7D,IAAI,IAAI,CAACC,IAAG,GAAIY,UAAU,EAAE;QAC1B,IAAI,CAACZ,IAAI,EAAE;MACb;MACA,IAAI;QACA,MAAMgB,QAAO,GAAI,MAAMrB,KAAK,CAACsB,GAAG,CAAC,8CAA8C,EAAE;UAC/EC,MAAM,EAAE;YACJlB,IAAI,EAAE,IAAI,CAACA,IAAI;YACfD,KAAK,EAAE,IAAI,CAACA;UAChB;QACF,CAAC,CAAC;QACF,IAAI,CAACG,KAAI,GAAIc,QAAQ,CAAClB,IAAI,CAACqB,KAAK;QAChC,IAAI,CAACJ,UAAS,GAAIC,QAAQ,CAAClB,IAAI,CAACsB,KAAK;QACrC,IAAI,CAACnB,SAAQ,GAAIY,IAAI,CAACC,KAAK,CAAC,IAAI,CAACC,UAAS,GAAI,IAAI,CAAChB,KAAK,IAAI,CAAC;MACjE,EAAE,OAAOsB,CAAC,EAAE;QACRC,KAAK,CAACD,CAAC;MACX,UAAU;QACR,IAAI,CAAChB,SAAQ,GAAI,KAAK;MACxB;IACF,CAAC;IACD,MAAMkB,aAAaA,CAACC,EAAE,EAAE;MACtB,IAAI,CAAClB,eAAc,GAAI,IAAI;MAC3B,IAAIM,UAAS,GAAIC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACC,UAAS,GAAI,IAAI,CAAChB,KAAK,IAAI,CAAC;MAC7D,IAAI,IAAI,CAACC,IAAG,GAAIY,UAAU,EAAE;QAC1B,IAAI,CAACZ,IAAI,EAAE;MACb;MACA,IAAI;QACA,MAAMgB,QAAO,GAAI,MAAMrB,KAAK,CAACsB,GAAG,CAAC,gDAAgD,EAAE;UACjFC,MAAM,EAAE;YACJM,EAAE,EAAEA;UACR;QACF,CAAC,CAAC;QACFC,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAClB,IAAI,CAAC;QAC1B,IAAI,CAACS,UAAS,GAAI,IAAI;QACtB,IAAI,CAACH,MAAK,GAAIY,QAAQ,CAAClB,IAAI,CAACqB,KAAK,CAAC,CAAC,CAAC;MACxC,EAAE,OAAOE,CAAC,EAAE;QACRC,KAAK,CAACD,CAAC;MACX,UAAU;QACR,IAAI,CAACf,eAAc,GAAI,KAAK;MAC9B;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}