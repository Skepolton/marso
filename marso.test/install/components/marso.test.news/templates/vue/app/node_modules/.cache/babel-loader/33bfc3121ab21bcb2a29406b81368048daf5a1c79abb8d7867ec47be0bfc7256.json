{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"text-h6 mb-2\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-space-between px-4\"\n};\nconst _hoisted_3 = {\n  class: \"d-flex align-center justify-center pa-4\"\n};\nconst _hoisted_4 = {\n  class: \"mx-2 text-caption\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_list_item = _resolveComponent(\"v-list-item\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_col = _resolveComponent(\"v-col\");\n  const _component_v_row = _resolveComponent(\"v-row\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  const _component_v_data_iterator = _resolveComponent(\"v-data-iterator\");\n  return _openBlock(), _createBlock(_component_v_card, null, {\n    default: _withCtx(() => [_createVNode(_component_v_data_iterator, {\n      items: $data.items,\n      \"items-per-page\": this.limit,\n      page: $data.page\n    }, {\n      default: _withCtx(({\n        items\n      }) => [_createVNode(_component_v_container, {\n        class: \"pa-2\",\n        fluid: \"\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_row, {\n          dense: \"\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(items, item => {\n            return _openBlock(), _createBlock(_component_v_col, {\n              key: item.ID,\n              cols: \"auto\",\n              md: \"4\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_v_card, {\n                class: \"pb-3\",\n                border: \"\",\n                flat: \"\"\n              }, {\n                default: _withCtx(() => [_createVNode(_component_v_list_item, {\n                  subtitle: item.raw.DETAIL_TEXT,\n                  class: \"mb-2\"\n                }, {\n                  title: _withCtx(() => [_createElementVNode(\"strong\", _hoisted_1, _toDisplayString(item.raw.NAME), 1 /* TEXT */)]),\n                  _: 2 /* DYNAMIC */\n                }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"subtitle\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_v_btn, {\n                  class: \"text-none\",\n                  size: \"small\",\n                  text: \"Подробнее\",\n                  variant: \"flat\",\n                  border: \"\",\n                  onClick: $event => this.getNewsDetail(item.ID)\n                }, null, 8 /* PROPS */, [\"onClick\"])])]),\n                _: 2 /* DYNAMIC */\n              }, 1024 /* DYNAMIC_SLOTS */)]),\n              _: 2 /* DYNAMIC */\n            }, 1024 /* DYNAMIC_SLOTS */);\n          }), 128 /* KEYED_FRAGMENT */))]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */)]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]),\n      footer: _withCtx(({\n        page,\n        pageCount,\n        prevPage,\n        nextPage\n      }) => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_v_btn, {\n        disabled: this.page === 1,\n        density: \"comfortable\",\n        icon: \"mdi-arrow-left\",\n        variant: \"tonal\",\n        rounded: \"\",\n        onClick: $event => {\n          this.page--;\n          this.getNewsList();\n        }\n      }, null, 8 /* PROPS */, [\"disabled\", \"onClick\"]), _createElementVNode(\"div\", _hoisted_4, \" Страница \" + _toDisplayString(this.page) + \" из \" + _toDisplayString(this.pageCount), 1 /* TEXT */), _createVNode(_component_v_btn, {\n        disabled: this.page >= this.pageCount,\n        density: \"comfortable\",\n        icon: \"mdi-arrow-right\",\n        variant: \"tonal\",\n        rounded: \"\",\n        onClick: $event => {\n          this.page++;\n          this.getNewsList();\n        }\n      }, null, 8 /* PROPS */, [\"disabled\", \"onClick\"])])]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"items\", \"items-per-page\", \"page\"])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_v_card","default","_withCtx","_createVNode","_component_v_data_iterator","items","$data","limit","page","_component_v_container","fluid","_component_v_row","dense","_createElementBlock","_Fragment","_renderList","item","_component_v_col","key","ID","cols","md","border","flat","_component_v_list_item","subtitle","raw","DETAIL_TEXT","title","_createElementVNode","_hoisted_1","_toDisplayString","NAME","_","_hoisted_2","_component_v_btn","size","text","variant","onClick","$event","getNewsDetail","footer","pageCount","prevPage","nextPage","_hoisted_3","disabled","density","icon","rounded","getNewsList","_hoisted_4"],"sources":["/home/bitrix/www/local/modules/marso.test/install/components/marso.test.news/templates/vue/app/src/App.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-data-iterator\n      :items=\"items\"\n      :items-per-page=\"this.limit\"\n      :page=\"page\"\n    >\n      <template v-slot:default=\"{ items }\">\n        <v-container class=\"pa-2\" fluid>\n          <v-row dense>\n            <v-col\n              v-for=\"item in items\"\n              :key=\"item.ID\"\n              cols=\"auto\"\n              md=\"4\"\n            >\n              <v-card class=\"pb-3\" border flat>\n\n                <v-list-item :subtitle=\"item.raw.DETAIL_TEXT\" class=\"mb-2\">\n                  <template v-slot:title>\n                    <strong class=\"text-h6 mb-2\">{{ item.raw.NAME }}</strong>\n                  </template>\n                </v-list-item>\n\n                <div class=\"d-flex justify-space-between px-4\">\n                  <v-btn\n                    class=\"text-none\"\n                    size=\"small\"\n                    text=\"Подробнее\"\n                    variant=\"flat\"\n                    border\n                    @click=\"this.getNewsDetail(item.ID)\"\n                  >\n                  </v-btn>\n                </div>\n              </v-card>\n            </v-col>\n          </v-row>\n        </v-container>\n      </template>\n\n      <template v-slot:footer=\"{ page, pageCount, prevPage, nextPage }\">\n        <div class=\"d-flex align-center justify-center pa-4\">\n          <v-btn\n            :disabled=\"this.page === 1\"\n            density=\"comfortable\"\n            icon=\"mdi-arrow-left\"\n            variant=\"tonal\"\n            rounded\n            @click=\"this.page--; this.getNewsList()\"\n          ></v-btn>\n\n          <div class=\"mx-2 text-caption\">\n            Страница {{ this.page }} из {{ this.pageCount }}\n          </div>\n\n          <v-btn\n            :disabled=\"this.page >= this.pageCount\"\n            density=\"comfortable\"\n            icon=\"mdi-arrow-right\"\n            variant=\"tonal\"\n            rounded\n            @click=\"this.page++; this.getNewsList()\"\n            \n          ></v-btn>\n        </div>\n      </template>\n  \n    </v-data-iterator>\n  </v-card>\n</template>\n\n<script>\n// @ is an alias to /src\nimport axios from 'axios';\n//axios.defaults.params = {}\nexport default {\n  name: 'news',\n  components: {\n  },\n  data() {\n    return {\n      limit:6,\n      page: 1,\n      pageCount:0,\n      items: Array(),\n      detail:\"\",\n      isLoading:false,\n      isLoadingDetail:false\n    }\n  },\n  computed: {\n\n  },\n  mounted() {\n    this.getNewsList();\n  },\n  methods: {\n    async getNewsList() {\n      this.isLoading = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n          const response = await axios.get('http://172.19.110.3/marso.test/rest/getlist/', {\n            params: {\n                page: this.page,\n                limit: this.limit,\n            }\n          });\n          this.items = response.data.ITEMS;\n          this.totalItems = response.data.COUNT;\n          this.pageCount = Math.round(this.totalItems / this.limit) - 1;\n      } catch (e) {\n          alert(e)\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async getNewsDetail(id) {\n      this.isLoadingDetail = true;\n      let totalPages = Math.round(this.totalItems / this.limit) - 1;\n      if (this.page > totalPages) {\n        this.page--;\n      }\n      try {\n          const response = await axios.get('http://172.19.110.3/marso.test/rest/getDetail/', {\n            params: {\n                id: id,\n            }\n          });\n          console.log(id);\n          this.detail = response.data;\n      } catch (e) {\n          alert(e)\n      } finally {\n        this.isLoadingDetail = false;\n      }\n    },\n  }\n}\n</script>\n\n<style>\n</style>\n"],"mappings":";;EAoB4BA,KAAK,EAAC;AAAc;;EAI3BA,KAAK,EAAC;AAAmC;;EAkBjDA,KAAK,EAAC;AAAyC;;EAU7CA,KAAK,EAAC;AAAmB;;;;;;;;;uBAnDtCC,YAAA,CAoESC,iBAAA;IArEXC,OAAA,EAAAC,QAAA,CAEI,MAkEkB,CAlElBC,YAAA,CAkEkBC,0BAAA;MAjEfC,KAAK,EAAEC,KAAA,CAAAD,KAAK;MACZ,gBAAc,OAAOE,KAAK;MAC1BC,IAAI,EAAEF,KAAA,CAAAE;;MAEUP,OAAO,EAAAC,QAAA,CACtB,CA8Bc;QA/BYG;MAAK,OAC/BF,YAAA,CA8BcM,sBAAA;QA9BDX,KAAK,EAAC,MAAM;QAACY,KAAK,EAAL;;QARlCT,OAAA,EAAAC,QAAA,CASU,MA4BQ,CA5BRC,YAAA,CA4BQQ,gBAAA;UA5BDC,KAAK,EAAL;QAAK;UATtBX,OAAA,EAAAC,QAAA,CAWc,MAAqB,E,kBADvBW,mBAAA,CA0BQC,SAAA,QApCpBC,WAAA,CAW6BV,KAAK,EAAbW,IAAI;iCADbjB,YAAA,CA0BQkB,gBAAA;cAxBLC,GAAG,EAAEF,IAAI,CAACG,EAAE;cACbC,IAAI,EAAC,MAAM;cACXC,EAAE,EAAC;;cAdjBpB,OAAA,EAAAC,QAAA,CAgBc,MAmBS,CAnBTC,YAAA,CAmBSH,iBAAA;gBAnBDF,KAAK,EAAC,MAAM;gBAACwB,MAAM,EAAN,EAAM;gBAACC,IAAI,EAAJ;;gBAhB1CtB,OAAA,EAAAC,QAAA,CAkBgB,MAIc,CAJdC,YAAA,CAIcqB,sBAAA;kBAJAC,QAAQ,EAAET,IAAI,CAACU,GAAG,CAACC,WAAW;kBAAE7B,KAAK,EAAC;;kBACjC8B,KAAK,EAAA1B,QAAA,CACpB,MAAyD,CAAzD2B,mBAAA,CAAyD,UAAzDC,UAAyD,EAAAC,gBAAA,CAAzBf,IAAI,CAACU,GAAG,CAACM,IAAI,iB;kBApBjEC,CAAA;mEAwBgBJ,mBAAA,CAUM,OAVNK,UAUM,GATJ/B,YAAA,CAQQgC,gBAAA;kBAPNrC,KAAK,EAAC,WAAW;kBACjBsC,IAAI,EAAC,OAAO;kBACZC,IAAI,EAAC,WAAW;kBAChBC,OAAO,EAAC,MAAM;kBACdhB,MAAM,EAAN,EAAM;kBACLiB,OAAK,EAAAC,MAAA,SAAOC,aAAa,CAACzB,IAAI,CAACG,EAAE;;gBA/BtDc,CAAA;;cAAAA,CAAA;;;UAAAA,CAAA;;QAAAA,CAAA;;MAyCuBS,MAAM,EAAAxC,QAAA,CACrB,CAuBM;QAxBmBM,IAAI;QAAEmC,SAAS;QAAEC,QAAQ;QAAEC;MAAQ,OAC5DhB,mBAAA,CAuBM,OAvBNiB,UAuBM,GAtBJ3C,YAAA,CAOSgC,gBAAA;QANNY,QAAQ,OAAOvC,IAAI;QACpBwC,OAAO,EAAC,aAAa;QACrBC,IAAI,EAAC,gBAAgB;QACrBX,OAAO,EAAC,OAAO;QACfY,OAAO,EAAP,EAAO;QACNX,OAAK,EAAAC,MAAA;UAAA,KAAOhC,IAAI;UAAA,KAAS2C,WAAW;QAAA;wDAGvCtB,mBAAA,CAEM,OAFNuB,UAEM,EAFyB,YACpB,GAAArB,gBAAA,MAAQvB,IAAI,IAAG,MAAI,GAAAuB,gBAAA,MAAQY,SAAS,kBAG/CxC,YAAA,CAQSgC,gBAAA;QAPNY,QAAQ,OAAOvC,IAAI,SAASmC,SAAS;QACtCK,OAAO,EAAC,aAAa;QACrBC,IAAI,EAAC,iBAAiB;QACtBX,OAAO,EAAC,OAAO;QACfY,OAAO,EAAP,EAAO;QACNX,OAAK,EAAAC,MAAA;UAAA,KAAOhC,IAAI;UAAA,KAAS2C,WAAW;QAAA;;MA9DjDlB,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}